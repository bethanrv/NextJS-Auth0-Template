{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/actions/createAccessToken.ts"],"sourcesContent":["\"use server\";\n\nimport axios from \"axios\";\n\ninterface AccessTokenResponse {\n  access_token: string;\n  expires_in: number;\n  token_type: string;\n}\n\n// Create an access token for the Auth0 management API, this is used to fetch user roles\nexport async function createAccessToken(): Promise<string> {\n  try {\n    const response = await axios.post<AccessTokenResponse>(\n      `${process.env.AUTH0_ISSUER_BASE_URL}/oauth/token`,\n      new URLSearchParams({\n        grant_type: \"client_credentials\",\n        client_id: process.env.AUTH0_CLIENT_ID!,\n        client_secret: process.env.AUTH0_CLIENT_SECRET!,\n        audience: `${process.env.AUTH0_ISSUER_BASE_URL}/api/v2/`,\n      }),\n      {\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\",\n        },\n      }\n    );\n\n    return response.data.access_token;\n  } catch (error) {\n    throw new Error(\"Failed to get Auth0 management token\");\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEA;;;;AASO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAC/B,GAAG,QAAQ,GAAG,CAAC,qBAAqB,CAAC,YAAY,CAAC,EAClD,IAAI,gBAAgB;YAClB,YAAY;YACZ,WAAW,QAAQ,GAAG,CAAC,eAAe;YACtC,eAAe,QAAQ,GAAG,CAAC,mBAAmB;YAC9C,UAAU,GAAG,QAAQ,GAAG,CAAC,qBAAqB,CAAC,QAAQ,CAAC;QAC1D,IACA;YACE,SAAS;gBACP,gBAAgB;YAClB;QACF;QAGF,OAAO,SAAS,IAAI,CAAC,YAAY;IACnC,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM;IAClB;AACF;;;IArBsB;;AAAA,+OAAA"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/actions/getUsersRoles.ts"],"sourcesContent":["\"use server\";\n\nimport { createAccessToken } from \"./createAccessToken\";\nimport { getSession } from \"@auth0/nextjs-auth0\";\n\ntype Role = {\n  id: string;\n  name: string;\n  description: string;\n};\n\n// Get the roles for the current user in Auth0 Management API\nexport async function getUsersRoles(): Promise<Role[]> {\n  const session = await getSession();\n  const user = session?.user;\n\n  if (!user) {\n    throw new Error(\"User not authenticated\");\n  }\n\n  const token = await createAccessToken();\n\n  const response = await fetch(\n    `${process.env.AUTH0_ISSUER_BASE_URL}/api/v2/users/${user.sub}/roles`,\n    {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }\n  );\n\n  if (!response.ok) {\n    throw new Error(\"Failed to fetch user roles\");\n  }\n\n  const data: Role[] = await response.json();\n  return data;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;;AASO,eAAe;IACpB,MAAM,UAAU,MAAM,CAAA,GAAA,2JAAA,CAAA,aAAU,AAAD;IAC/B,MAAM,OAAO,SAAS;IAEtB,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,QAAQ,MAAM,CAAA,GAAA,4HAAA,CAAA,oBAAiB,AAAD;IAEpC,MAAM,WAAW,MAAM,MACrB,GAAG,QAAQ,GAAG,CAAC,qBAAqB,CAAC,cAAc,EAAE,KAAK,GAAG,CAAC,MAAM,CAAC,EACrE;QACE,QAAQ;QACR,SAAS;YACP,QAAQ;YACR,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAGF,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAe,MAAM,SAAS,IAAI;IACxC,OAAO;AACT;;;IA3BsB;;AAAA,+OAAA"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/actions/isUserAdmin.tsx"],"sourcesContent":["\"use server\";\n\nimport { getUsersRoles } from \"./getUsersRoles\";\n\n// Check if the current user is an admin\nexport async function isUserAdmin(): Promise<boolean> {\n  try {\n    const roles = await getUsersRoles();\n\n    console.log(\"ROLES\", roles);\n    return roles.some((role) => role.name.toLowerCase() === \"admin\"); // or can check for rol_DzoN34zS1PFnEfY4\n  } catch (error) {\n    console.error(\"Error checking admin status:\", error);\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM,CAAA,GAAA,wHAAA,CAAA,gBAAa,AAAD;QAEhC,QAAQ,GAAG,CAAC,SAAS;QACrB,OAAO,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,IAAI,CAAC,WAAW,OAAO,UAAU,wCAAwC;IAC5G,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF;;;IAVsB;;AAAA,+OAAA"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/utils/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\nexport const createClient = async () => {\n  const cookieStore = await cookies() // Add await here\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          cookieStore.set({ name, value, ...options })\n        },\n        remove(name: string, options: CookieOptions) {\n          cookieStore.set({ name, value: '', ...options })\n        }\n      }\n    }\n  )\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AADA;;;AAGO,MAAM,eAAe;IAC1B,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,IAAI,iBAAiB;;IAErD,OAAO,CAAA,GAAA,yKAAA,CAAA,qBAAkB,AAAD,sUAGtB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,YAAY,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YAC5C;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,YAAY,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;gBAAC;YAChD;QACF;IACF;AAEJ"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/admin/EventItem.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/EventItem.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/EventItem.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/admin/EventItem.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/EventItem.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/EventItem.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAuQ,GACpS,qCACA"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/admin/page.tsx"],"sourcesContent":["// pages/admin/page.tsx (or wherever your admin page lives)\nimport { isUserAdmin } from \"@/actions/isUserAdmin\";\nimport { redirect } from \"next/navigation\";\nimport { createClient } from \"@/utils/supabase/server\";\nimport EventItem from \"./EventItem\"; // Adjust the import path as necessary\n\ninterface Event {\n  id: string;\n  sport_key: string;\n  sport_title: string;\n  commence_time: string;\n  completed: string;\n  home_team: string;\n  away_team: string;\n  scores: string;\n  last_updated: string;\n}\n\n// Return past events\nfunction filterPastEvents(events: Event[]) {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  let pastEvents: Event[] = [];\n  events.forEach((event: Event) => {\n    if (event.completed === \"true\") pastEvents.push(event);\n  });\n  return pastEvents;\n}\n\n// Return current events (non-complete and already commenced)\nfunction filterCurrentEvents(events: Event[]) {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  const currentTime = new Date();\n  let currentEvents: Event[] = [];\n  events.forEach((event: Event) => {\n    if (event.completed === \"false\" && new Date(event.commence_time) < currentTime)\n      currentEvents.push(event);\n  });\n  return currentEvents;\n}\n\n// Return upcoming events\nfunction filterUpcomingEvents(events: Event[]) {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  const currentTime = new Date();\n  let upcomingEvents: Event[] = [];\n  events.forEach((event: Event) => {\n    if (event.completed === \"false\" && new Date(event.commence_time) > currentTime)\n      upcomingEvents.push(event);\n  });\n  return upcomingEvents;\n}\n\n\nasync function AdminPage() {\n  const isAdmin = await isUserAdmin();\n\n  if (!isAdmin) {\n    return redirect(\"/unauthorized\");\n  }\n\n  // Create Supabase client and query events\n  const supabase = await createClient();\n  const { data: events, error } = await supabase.from(\"events\").select();\n  console.log(\"Events:\", events, \"Error:\", error);\n\n  // Assume events is an array and you have filtered them as needed.\n  const currentEvents = filterCurrentEvents(events)\n  const upcomingEvents = filterUpcomingEvents(events)\n  const pastEvents = filterPastEvents(events)\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-white shadow rounded-lg p-6\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">\n            Admin Dashboard\n          </h1>\n          <p className=\"text-gray-600 mb-4\">\n            Welcome to the admin area. This page is only accessible to\n            administrators.\n          </p>\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-3\">\n              Happening Now\n            </h2>\n            {currentEvents.length > 0 ? (\n              <ul className=\"space-y-2\">\n                {currentEvents.map((event) => (\n                  <EventItem key={event.id} event={event} />\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-gray-600\">\n                There are no events happening right now.\n              </p>\n            )}\n          </div>\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-3\">\n              Upcoming Events\n            </h2>\n            {upcomingEvents.length > 0 ? (\n              <ul className=\"space-y-2\">\n                {upcomingEvents.map((event) => (\n                  <EventItem key={event.id} event={event} />\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-gray-600\">\n                There are no upcoming events.\n              </p>\n            )}\n          </div>\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-3\">\n              Past Events\n            </h2>\n            {pastEvents.length > 0 ? (\n              <ul className=\"space-y-2\">\n                {pastEvents.map((event) => (\n                  <EventItem key={event.id} event={event} />\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-gray-600\">\n                There are no completed events.\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AdminPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}