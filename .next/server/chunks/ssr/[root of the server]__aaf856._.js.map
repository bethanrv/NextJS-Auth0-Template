{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/utils/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\nexport const createClient = async () => {\n  const cookieStore = await cookies() // Add await here\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          cookieStore.set({ name, value, ...options })\n        },\n        remove(name: string, options: CookieOptions) {\n          cookieStore.set({ name, value: '', ...options })\n        }\n      }\n    }\n  )\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AADA;;;AAGO,MAAM,eAAe;IAC1B,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,IAAI,iBAAiB;;IAErD,OAAO,CAAA,GAAA,yKAAA,CAAA,qBAAkB,AAAD,sUAGtB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,YAAY,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YAC5C;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,YAAY,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;gBAAC;YAChD;QACF;IACF;AAEJ"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/feed/FeedItem.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/feed/FeedItem.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/feed/FeedItem.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyR,GACtT,uDACA"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/feed/FeedItem.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/feed/FeedItem.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/feed/FeedItem.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqQ,GAClS,mCACA"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/components/ProfileImage.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ProfileImage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ProfileImage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/components/ProfileImage.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ProfileImage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ProfileImage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/brv/Documents/NextJS-Auth0-Template/app/feed/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\nimport { createClient } from \"@/utils/supabase/server\";\nimport FeedItem from \"./FeedItem\"; // Adjust the import path as necessary\nimport ProfileImage from \"@/components/ProfileImage\";\nimport { getSession } from \"@auth0/nextjs-auth0\";\n\ninterface Fight {\n  id : number\n  created_at: string,\n  title: string,\n  slug: string,\n  date: string,\n  location: string,\n  status: string,\n  scheduled_rounds: number,\n  result_outcome: string | null,\n  result_round: string | null,\n  fighter_1_name: string,\n  fighter_2_name: string,\n  fighter_1_id: string | null,\n  fighter_2_id: string | null,\n  fighter_1_is_winner: string | null,\n  fighter_2_is_winner: string | null,\n  division_name: string | null,\n  division_weight_lb: number,\n  event_id: string,\n  poster_image_url: string | null\n}\n\ninterface dbEvent {\n  id: string;\n  sport_key : string;\n  sport_title : string;\n  commence_time : string;\n  completed : string;\n  home_team : string;\n  away_team : string;\n  home_team_price: number;\n  away_team_price: number;\n  scores : string | null;\n  last_updated : string | null;\n}\n\ninterface User {\n  email: string;\n  email_verified: boolean;\n  given_name: string,\n  name: string;\n  nickname: string;\n  picture: string;\n  sid: string;\n  sub: string;\n  updated_at: string;\n}\n\ninterface DbUser {\n  id: number | null;\n  name: string | null;\n  nickname: string | null;\n  sid: string  | null;\n  tokens: number | null;\n}\n\n// Return past events\nfunction filterPastEvents(events: Fight[]):Fight[] {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  let pastEvents: Fight[] = [];\n  events.forEach((event: Fight) => {\n    if (event.status === \"FINISHED\") pastEvents.push(event);\n  });\n  return pastEvents;\n}\n\n// Return current events (non-complete and already commenced)\nfunction filterCurrentEvents(events: Fight[]):Fight[] {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  const currentTime = new Date();\n  let currentEvents: Fight[] = [];\n  events.forEach((event: Fight) => {\n    if (event.status !== \"FINISHED\" && new Date(event.date) < currentTime)\n      currentEvents.push(event);\n  });\n  return currentEvents;\n}\n\n// Return upcoming events\nfunction filterUpcomingEvents(events: Fight[]):Fight[] {\n  if (!events || !Array.isArray(events))\n    throw new Error(\"events not array: \" + events);\n  const currentTime = new Date();\n  let upcomingEvents: Fight[] = [];\n  events.forEach((event: Fight) => {\n    if (event.status === \"NOT_STARTED\")\n      upcomingEvents.push(event);\n  });\n  return upcomingEvents;\n}\n\n// insert new user\nasync function insertUser(session : any, supabase : any) {\n\n  if (!session?.user)\n    throw new Error(\"Error on insertUser, session: \" + session)\n\n  const { data, error } = await supabase\n    .from('users')\n    .insert({\n      sid: session.user.sid,\n      name: session.user.name,\n      nickname: session.user.nickname,\n      tokens: 100\n    })\n    .select('*')\n    .single();\n  if (error) {\n    console.error('Insert error:', error);\n    throw error;\n  }\n\n  console.log('insert res =========')\n  console.log(data)\n  return data;\n}\n\nasync function isUserInDB(session: any, supabase: any) {\n  try {\n    const { count, error } = await supabase\n      .from('users')\n      .select('*', { count: 'exact', head: true })\n      .eq('sid', session.user.sid);\n\n    if (error) throw error;\n    return (count || 0) > 0;\n  } catch (error) {\n    console.error('Error checking user existence:', error);\n    return false;\n  }\n}\n\nasync function getDBUserInfo(session: any, supabase: any) {\n  try{\n    const {data, error} = await supabase.from('users').select('*').eq('sid', session.user.sid);\n    if (error) throw error;\n    return data\n  }catch (error) {\n    console.error('Error getting user  db info:', error);\n    return false;\n  }\n}\n  \n// get user info from supabase\nasync function getDatabaseUser(session : any, supabase : any) {\n\n  let userInfo\n\n  // user exists? No -> add user\n  const userInDB = await isUserInDB(session, supabase)\n  if(!userInDB) {\n    console.log('Adding new user...')\n   return await insertUser(session, supabase)\n  }\n  // else get user info\n  return await getDBUserInfo(session, supabase)\n}\n\nfunction getTokenCount(dbUserInfo: DbUser[]) {\n\n}\n\nasync function FeedPage() {\n\n  // Create Supabase client and query events\n  const supabase = await createClient();\n  let { data: events, error } = await supabase.from(\"fights\").select();\n  console.log(\"Fights:\", events, \"Error:\", error);\n  events = events as Fight[]\n\n  // filter events\n  const currentEvents = filterCurrentEvents(events)\n  const upcomingEvents = filterUpcomingEvents(events)\n  const pastEvents = filterPastEvents(events)\n\n  // get auth0 session\n  const session = await getSession();\n  let dbUserInfo = []\n\n  if (session?.user) { // get user from db\n    console.log('session ============')\n    dbUserInfo = await getDatabaseUser(session, supabase)\n\n    console.log('db user info')\n    console.log(dbUserInfo)\n\n    // remove user info test\n    // const { error } = await supabase\n    // .from('users')\n    // .delete()\n    // .eq('sid', 'oUWNDhRKILBXNA2ZRvNZ97QY_2YDJt1S');\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-black shadow p-6\">\n        \n          {session ? (\n            <div style={{justifyContent: 'end', alignItems:'center'}} className=\"flex\">\n                <div style={{justifyContent: 'end', alignItems:'center', border: '1px solid black', borderRadius: '5px', marginRight: '0.5rem', padding: '0.25rem'}} className=\"flex\">\n                    <p className=\"text-white\" style={{fontSize:'14px'}}> { dbUserInfo[0]?.tokens ?? 100 } </p>\n                    <img src=\"/coin.svg\" alt=\"Edit\" style={{height:'1.5rem'}} />\n                </div>\n                <ProfileImage />\n            </div>\n          ) : (\n            <h2 className=\"text-xl font-semibold text-white mb-4\">\n            Please login to bet credits\n            </h2>\n          )}\n\n          <p className=\"text-gray-600 mb-4 text-white\">\n            Welcome to PnB\n          </p>\n\n          {currentEvents.length > 0 ? (\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-white mb-3\">\n              Happening Now\n            </h2>\n              <ul className=\"space-y-2\">\n                {currentEvents.map((event) => (\n                  <FeedItem key={event.id} event={event} canBet={false} />\n                ))}\n              </ul>\n          </div>):( <></> )}\n\n          {upcomingEvents.length > 0 ? (\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-white mb-3\">\n            Upcoming Fights\n            </h2>\n              <ul className=\"space-y-2\">\n                {upcomingEvents.map((event) => (\n                  <FeedItem key={event.id} event={event} canBet={true} />\n                ))}\n              </ul>\n          </div>):( <></> )}\n\n          {pastEvents.length > 0 ? (\n          <div className=\"border-t border-gray-200 pt-4\">\n            <h2 className=\"text-xl font-semibold text-white mb-3\">\n            Past Events\n            </h2>\n              <ul className=\"space-y-2\">\n                {pastEvents.map((event) => (\n                  <FeedItem key={event.id} event={event} canBet={false}/>\n                ))}\n              </ul>\n          </div>):( <></> )}\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default FeedPage;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 553, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 553, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}